<%= form_for @single_customer do |f| %>
  <% if @single_customer.errors.any? %>
    <div id="error_explanation">
      <h2>以下字段输入错误导致保存失败:</h2>

      <ul>
      <% @single_customer.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      <% if @single_customer.errors[:id_no]%>
      <li>身份证</li>
      <% end %>
      </ul>
    </div>
  <% end %>

<h2 class='text-center'><strong>人员信息登记表</strong></h2>
<table width="900px" align="center"><tr width="100%"> 
      <td width="50%">填写日期:
        <%= f.date_select :input_date, default: Date.today,use_two_digit_numbers: true %></td><td align="right" width="50%">档案编号:<%= f.text_field :document_no %></td> 
    </tr></table>
    <table width="900px" border="1" align="center" cellpadding="10" style="border-style: none none none none;">
      <tr class="print-table-row">
        <td width="8%" class:"form-label">*姓名</td><td width="15%"><%= f.text_field :name, size:40, class: "form-control" %></td>
        <td width="5%">*性别</td><td width="10%" align="center"><%= f.radio_button "gender", 1 %>男&nbsp;<%= f.radio_button "gender", 2 %>女</td>
        <td width="5%">*民族</td><td width="8%"><%= f.text_field :ethnic_name,size: 15 , class: "form-control"%></td>
        
        <td width="12%" rowspan=4 align="center" id="photo">照片</td>
      </tr>
      <tr class="print-table-row">
        <td width="8%">*出生日期</td><td width="10%"><%= f.text_field :birth, class: 'dtp form-control' , "data-date-format" => "yyyy-mm-dd" %></td>
        <td width="8%">*身份证号码</td><td width="20" colspan=3><%= f.text_field :id_no, size:36, class: "form-control"%></td>
      </tr>
      <tr class="print-table-row">
        <td width="8%">*身份证地址</td><td colspan=5><%= f.text_field :id_address, size:100, class: "form-control"%></td>
      </tr>
      <tr class="print-table-row" style="border-style: none none none none;">
        <td width="8%">*户口性质</td><td colspan=2>
            <%= f.radio_button "hukou_type", 21 %>外地农村(省内市外)&nbsp;
            <%= f.radio_button "hukou_type", 22 %>外地农村(省外)&nbsp;
            <%= f.radio_button "hukou_type", 11 %>外地城镇(省内市外)&nbsp;
            <%= f.radio_button "hukou_type", 12 %>外地城镇(省外)&nbsp;
            <%= f.radio_button "hukou_type", 20 %>本地农村(主城区)&nbsp;
            <%= f.radio_button "hukou_type", 10 %>本地城镇(主城区)</td>
        <td width="4%">*学历</td><td width="10%"  colspan=2><%= f.select :education, ["小学以下","小学","初中","高中","中专","大专","本科","硕士","博士"], {include_blank: true}, class: 'form-control'%></td>
      </tr>
    </table>
  
  <table width="900px" border="1" align="center"}>
    <tr class="print-table-row" >
        <td width="12%">*联系电话</td><td><%= f.text_field :tel, size:15, class: "form-control" %></td>
        <td width="18%">*其他联系人(与本人关系)</td><td><%= f.text_field :other_contact_person, size:20, class: "form-control" %></td>
        <td width="10%">*其他联系电话</td><td><%= f.text_field :other_contact_call, size:15, class: "form-control" %></td>
    </tr>
    <tr class="print-table-row">
        <td width="12%">QQ</td><td><%= f.text_field :qq, size:15, class: "form-control" %></td>
        <td width="18%">电子邮件</td><td><%= f.text_field :email, size:20, class: "form-control" %></td>
        <td width="10%">微信</td><td><%= f.text_field :wechat, size:15, class: "form-control" %></td>
    </tr>
  </table>
  <table width="900px" border="1" align="center">
    <tr class="print-table-row">
      <td width="12%">*通讯地址(在杭现住址)</td><td><%= f.text_field :communication_address, size:100, class: "form-control" %></td>
    </tr>
    <tr class="print-table-row">
      <td width="9%">建档类型</td><td><%= f.check_box "is_doc_for_shebao"%>A社保&nbsp;
                                      <%= f.check_box "is_doc_for_shigong"%>B市公&nbsp;
                                      <%= f.check_box "is_doc_for_shenggong"%>C省公&nbsp;
                                      <%= f.check_box "is_doc_for_butuichajia"%>D补退差价&nbsp;
                                      <%= f.check_box "is_doc_for_xufei"%>E续费&nbsp;
                                      <%= f.check_box "is_doc_for_qita"%>F其他<%= f.text_field :comment_for_qita , size:40 %>
                                    </td>
    </tr>
    <tr class="print-table-row">
      <td width="9%">用途</td><td><%= f.check_box "is_usage_zhengchang"%>正常&nbsp;
                                  <%= f.check_box "is_usage_ruxue"%>入学&nbsp;
                                  <%= f.check_box "is_usage_luohu"%>落户&nbsp;
                                  <%= f.check_box "is_usage_shenyu"%>生育&nbsp;
                                  <%= f.check_box "is_usage_yiliao"%>医疗&nbsp;
                                  <%= f.check_box "is_usage_gouche"%>购车&nbsp;
                                  <%= f.check_box "is_usage_goufang"%>购房&nbsp;
                                  <%= f.check_box "is_usage_daikuan"%>贷款&nbsp;
                              </td>
    </tr>

    <tr class="print-table-row">
      <td colspan=2 align="right"><h5 class="text-center"><strong>以上信息经本人确认.</strong></h5><strong>&nbsp;签名:____________________日期:________________</strong></td>
    </tr>
    </table> 
    <table width="900px" border="1" align="center">
    <tr class="print-table-row">
      <td width="12%">档案建立经办人:<td><%= f.text_field :creator, size:20, class: "form-control"%></td><td>联系电话:</td><td><%= f.text_field :creator_tel, size:30, class: "form-control" %></td>
    </tr>
    </table>
    <table width="900px" border="1" align="center">
    <tr class="print-table-row">
      <td width="12%">备注:</td><td><%= f.text_area :comment, cols: 100, rows: 2, class: "form-control" %></td>
    </tr>
    <tr class="print-table-row">
      <td>说明:</td><td>1. 续费时请提前一个月支付下期费用,社保申报截止日为每月12日,市公积金申报截止日为每月20日,省公积金申报截止日为每月25日,过期则记为次月.<br>2.每年5-7月,社保基数调整,调整日期从当年1月起计算,费用多还少补.</td>
    </tr>
    </table>
    <table width="900px" border="0" align="center">
    <tr class="print-table-row">
      <td width="85%"></td>

        <% if editable %>
        <td><%= f.submit "提交", class: "btn btn-primary noprint" %></td>
        <td><%= link_to '返回', single_customers_path , class: "btn btn-primary noprint"%></td>
        <%end%>

    </tr>
    </table>  
<% end %>

<script type="text/javascript">
  $('.dtp').datepicker();
  $(function () {
    $('#single_customer_id_no').change(function (event) {
      var id_no = $('#single_customer_id_no').val();
      if (id_no.length != 18){
        alert("身份证号码应该为18位!");
        return;
      }
      else{
        $('#single_customer_birth').val(id_no.substr(6,4) + "-" + id_no.substr(10,2) + "-" + id_no.substr(12,2));
      }
    });
  });
</script>
